import{S as me,i as pe,s as ge,D as He,k as T,a as L,l as O,m as k,c as j,h as p,n as b,p as V,b as y,H as g,J as D,E as We,F as qe,G as Ye,f as he,t as _e,K as Ve,L as Je,M as Qe,v as ee,q as w,r as F,C as be,x as Xe,e as N,y as Ze,z as xe,A as $e,N as et,O as te,P as tt,u as U,Q as ne,R as re}from"../../chunks/index-667a5ca6.js";function H(e,t,n,i){function l(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function f(d){try{s(i.next(d))}catch(u){o(u)}}function c(d){try{s(i.throw(d))}catch(u){o(u)}}function s(d){d.done?r(d.value):l(d.value).then(f,c)}s((i=i.apply(e,t||[])).next())})}function W(e,t){var n={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,l,r,o;return o={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function f(s){return function(d){return c([s,d])}}function c(s){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(n=0)),n;)try{if(i=1,l&&(r=s[0]&2?l.return:s[0]?l.throw||((r=l.return)&&r.call(l),0):l.next)&&!(r=r.call(l,s[1])).done)return r;switch(l=0,r&&(s=[s[0]&2,r.value]),s[0]){case 0:case 1:r=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,l=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if(r=n.trys,!(r=r.length>0&&r[r.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!r||s[1]>r[0]&&s[1]<r[3])){n.label=s[1];break}if(s[0]===6&&n.label<r[1]){n.label=r[1],r=s;break}if(r&&n.label<r[2]){n.label=r[2],n.ops.push(s);break}r[2]&&n.ops.pop(),n.trys.pop();continue}s=t.call(e,n)}catch(d){s=[6,d],l=0}finally{i=r=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function nt(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var i=n.call(e),l,r=[],o;try{for(;(t===void 0||t-- >0)&&!(l=i.next()).done;)r.push(l.value)}catch(f){o={error:f}}finally{try{l&&!l.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return r}function rt(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(nt(arguments[t]));return e}var it=new Map([["avi","video/avi"],["gif","image/gif"],["ico","image/x-icon"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["mkv","video/x-matroska"],["mov","video/quicktime"],["mp4","video/mp4"],["pdf","application/pdf"],["png","image/png"],["zip","application/zip"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]]);function J(e,t){var n=lt(e);if(typeof n.path!="string"){var i=e.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof t=="string"?t:typeof i=="string"&&i.length>0?i:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}function lt(e){var t=e.name,n=t&&t.lastIndexOf(".")!==-1;if(n&&!e.type){var i=t.split(".").pop().toLowerCase(),l=it.get(i);l&&Object.defineProperty(e,"type",{value:l,writable:!1,configurable:!1,enumerable:!0})}return e}var at=[".DS_Store","Thumbs.db"];function ot(e){return H(this,void 0,void 0,function(){return W(this,function(t){return[2,st(e)&&e.dataTransfer?ct(e.dataTransfer,e.type):ft(e)]})})}function st(e){return!!e.dataTransfer}function ft(e){var t=ut(e.target)?e.target.files?Z(e.target.files):[]:[];return t.map(function(n){return J(n)})}function ut(e){return e!==null}function ct(e,t){return H(this,void 0,void 0,function(){var n,i;return W(this,function(l){switch(l.label){case 0:return e.items?(n=Z(e.items).filter(function(r){return r.kind==="file"}),t!=="drop"?[2,n]:[4,Promise.all(n.map(dt))]):[3,2];case 1:return i=l.sent(),[2,ie(ye(i))];case 2:return[2,ie(Z(e.files).map(function(r){return J(r)}))]}})})}function ie(e){return e.filter(function(t){return at.indexOf(t.name)===-1})}function Z(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];t.push(i)}return t}function dt(e){if(typeof e.webkitGetAsEntry!="function")return le(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?ve(t):le(e)}function ye(e){return e.reduce(function(t,n){return rt(t,Array.isArray(n)?ye(n):[n])},[])}function le(e){var t=e.getAsFile();if(!t)return Promise.reject(e+" is not a File");var n=J(t);return Promise.resolve(n)}function mt(e){return H(this,void 0,void 0,function(){return W(this,function(t){return[2,e.isDirectory?ve(e):pt(e)]})})}function ve(e){var t=e.createReader();return new Promise(function(n,i){var l=[];function r(){var o=this;t.readEntries(function(f){return H(o,void 0,void 0,function(){var c,s,d;return W(this,function(u){switch(u.label){case 0:if(f.length)return[3,5];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,Promise.all(l)];case 2:return c=u.sent(),n(c),[3,4];case 3:return s=u.sent(),i(s),[3,4];case 4:return[3,6];case 5:d=Promise.all(f.map(mt)),l.push(d),r(),u.label=6;case 6:return[2]}})})},function(f){i(f)})}r()})}function pt(e){return H(this,void 0,void 0,function(){return W(this,function(t){return[2,new Promise(function(n,i){e.file(function(l){var r=J(l,e.fullPath);n(r)},function(l){i(l)})})]})})}function gt(e,t){if(e&&t){const n=Array.isArray(t)?t:t.split(","),i=e.name||"",l=(e.type||"").toLowerCase(),r=l.replace(/\/.*$/,"");return n.some(o=>{const f=o.trim().toLowerCase();return f.charAt(0)==="."?i.toLowerCase().endsWith(f):f.endsWith("/*")?r===f.replace(/\/.*$/,""):l===f})}return!0}const ht="file-invalid-type",_t="file-too-large",bt="file-too-small",yt="too-many-files",vt=e=>{e=Array.isArray(e)&&e.length===1?e[0]:e;const t=Array.isArray(e)?`one of ${e.join(", ")}`:e;return{code:ht,message:`File type must be ${t}`}},ae=e=>({code:_t,message:`File is larger than ${e} bytes`}),oe=e=>({code:bt,message:`File is smaller than ${e} bytes`}),Dt={code:yt,message:"Too many files"};function Et(e,t){const n=e.type==="application/x-moz-file"||gt(e,t);return[n,n?null:vt(t)]}function wt(e,t,n){if(G(e.size))if(G(t)&&G(n)){if(e.size>n)return[!1,ae(n)];if(e.size<t)return[!1,oe(t)]}else{if(G(t)&&e.size<t)return[!1,oe(t)];if(G(n)&&e.size>n)return[!1,ae(n)]}return[!0,null]}function G(e){return e!=null}function se(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function Y(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,t=>t==="Files"||t==="application/x-moz-file"):!!e.target&&!!e.target.files}function Ft(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function kt(e){return e.indexOf("Edge/")!==-1}function Ct(e=window.navigator.userAgent){return Ft(e)||kt(e)}function Tt(e){let t,n;return{c(){t=T("p"),n=w("Drag 'n' drop some files here, or click to select files")},l(i){t=O(i,"P",{});var l=k(t);n=F(l,"Drag 'n' drop some files here, or click to select files"),l.forEach(p)},m(i,l){y(i,t,l),g(t,n)},p:be,d(i){i&&p(t)}}}function Ot(e){let t,n,i,l,r,o,f;const c=e[32].default,s=He(c,e,e[31],null),d=s||Tt();return{c(){t=T("div"),n=T("input"),i=L(),d&&d.c(),this.h()},l(u){t=O(u,"DIV",{class:!0,style:!0});var m=k(t);n=O(m,"INPUT",{accept:!0,type:!0,name:!0,autocomplete:!0,tabindex:!0,style:!0}),i=j(m),d&&d.l(m),m.forEach(p),this.h()},h(){b(n,"accept",e[0]),n.multiple=e[1],b(n,"type","file"),b(n,"name",e[5]),b(n,"autocomplete","off"),b(n,"tabindex","-1"),V(n,"display","none"),b(t,"class",l=(e[4]?"":"dropzone")+" "+e[2]+" svelte-817dg2"),b(t,"style",e[3])},m(u,m){y(u,t,m),g(t,n),e[33](n),g(t,i),d&&d.m(t,null),e[34](t),r=!0,o||(f=[D(window,"focus",e[21]),D(window,"dragover",e[19]),D(window,"drop",e[20]),D(n,"change",e[15]),D(n,"click",At),D(t,"keydown",e[17](e[8])),D(t,"focus",e[17](e[9])),D(t,"blur",e[17](e[10])),D(t,"click",e[16](e[11])),D(t,"dragenter",e[18](e[12])),D(t,"dragover",e[18](e[13])),D(t,"dragleave",e[18](e[14])),D(t,"drop",e[18](e[15]))],o=!0)},p(u,m){(!r||m[0]&1)&&b(n,"accept",u[0]),(!r||m[0]&2)&&(n.multiple=u[1]),(!r||m[0]&32)&&b(n,"name",u[5]),s&&s.p&&(!r||m[1]&1)&&We(s,c,u,u[31],r?Ye(c,u[31],m,null):qe(u[31]),null),(!r||m[0]&20&&l!==(l=(u[4]?"":"dropzone")+" "+u[2]+" svelte-817dg2"))&&b(t,"class",l),(!r||m[0]&8)&&b(t,"style",u[3])},i(u){r||(he(d,u),r=!0)},o(u){_e(d,u),r=!1},d(u){u&&p(t),e[33](null),d&&d.d(u),e[34](null),o=!1,Ve(f)}}}function At(e){e.stopPropagation()}function St(e,t,n){let{$$slots:i={},$$scope:l}=t,{accept:r}=t,{disabled:o=!1}=t,{getFilesFromEvent:f=ot}=t,{maxSize:c=1/0}=t,{minSize:s=0}=t,{multiple:d=!0}=t,{preventDropOnDocument:u=!0}=t,{noClick:m=!1}=t,{noKeyboard:S=!1}=t,{noDrag:v=!1}=t,{noDragEventsBubbling:h=!1}=t,{containerClasses:B=""}=t,{containerStyles:K=""}=t,{disableDefaultStyles:x=!1}=t,{name:$=""}=t;const P=Je();let _={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]},A,C;function De(){_.isFileDialogActive=!1,_.isDragActive=!1,_.draggedFiles=[],_.acceptedFiles=[],_.fileRejections=[]}function Q(){C&&(n(7,C.value=null,C),_.isFileDialogActive=!0,C.click())}function Ee(a){!A||!A.isEqualNode(a.target)||(a.keyCode===32||a.keyCode===13)&&(a.preventDefault(),Q())}function we(){_.isFocused=!0}function Fe(){_.isFocused=!1}function ke(){m||(Ct()?setTimeout(Q,0):Q())}function Ce(a){a.preventDefault(),q(a),M=[...M,a.target],Y(a)&&Promise.resolve(f(a)).then(I=>{se(a)&&!h||(_.draggedFiles=I,_.isDragActive=!0,P("dragenter",{dragEvent:a}))})}function Te(a){if(a.preventDefault(),q(a),a.dataTransfer)try{a.dataTransfer.dropEffect="copy"}catch{}return Y(a)&&P("dragover",{dragEvent:a}),!1}function Oe(a){a.preventDefault(),q(a);const I=M.filter(z=>A&&A.contains(z)),E=I.indexOf(a.target);E!==-1&&I.splice(E,1),M=I,!(I.length>0)&&(_.isDragActive=!1,_.draggedFiles=[],Y(a)&&P("dragleave",{dragEvent:a}))}function Ae(a){a.preventDefault(),q(a),M=[],Y(a)&&(P("filedropped",{event:a}),Promise.resolve(f(a)).then(I=>{if(se(a)&&!h)return;const E=[],z=[];I.forEach(R=>{const[Re,Ne]=Et(R,r),[Be,Ke]=wt(R,s,c);if(Re&&Be)E.push(R);else{const Ge=[Ne,Ke].filter(Ue=>Ue);z.push({file:R,errors:Ge})}}),!d&&E.length>1&&(E.forEach(R=>{z.push({file:R,errors:[Dt]})}),E.splice(0)),_.acceptedFiles=E,_.fileRejections=z,P("drop",{acceptedFiles:E,fileRejections:z,event:a}),z.length>0&&P("droprejected",{fileRejections:z,event:a}),E.length>0&&P("dropaccepted",{acceptedFiles:E,event:a})})),De()}function X(a){return o?null:a}function Se(a){return S?null:X(a)}function Pe(a){return v?null:X(a)}function q(a){h&&a.stopPropagation()}function Ie(a){u&&a.preventDefault()}let M=[];function ze(a){u&&(A&&A.contains(a.target)||(a.preventDefault(),M=[]))}function Le(){_.isFileDialogActive&&setTimeout(()=>{if(C){const{files:a}=C;a.length||(_.isFileDialogActive=!1,P("filedialogcancel"))}},300)}Qe(()=>{n(7,C=null)});function je(a){ee[a?"unshift":"push"](()=>{C=a,n(7,C)})}function Me(a){ee[a?"unshift":"push"](()=>{A=a,n(6,A)})}return e.$$set=a=>{"accept"in a&&n(0,r=a.accept),"disabled"in a&&n(22,o=a.disabled),"getFilesFromEvent"in a&&n(23,f=a.getFilesFromEvent),"maxSize"in a&&n(24,c=a.maxSize),"minSize"in a&&n(25,s=a.minSize),"multiple"in a&&n(1,d=a.multiple),"preventDropOnDocument"in a&&n(26,u=a.preventDropOnDocument),"noClick"in a&&n(27,m=a.noClick),"noKeyboard"in a&&n(28,S=a.noKeyboard),"noDrag"in a&&n(29,v=a.noDrag),"noDragEventsBubbling"in a&&n(30,h=a.noDragEventsBubbling),"containerClasses"in a&&n(2,B=a.containerClasses),"containerStyles"in a&&n(3,K=a.containerStyles),"disableDefaultStyles"in a&&n(4,x=a.disableDefaultStyles),"name"in a&&n(5,$=a.name),"$$scope"in a&&n(31,l=a.$$scope)},[r,d,B,K,x,$,A,C,Ee,we,Fe,ke,Ce,Te,Oe,Ae,X,Se,Pe,Ie,ze,Le,o,f,c,s,u,m,S,v,h,l,i,je,Me]}class Pt extends me{constructor(t){super(),pe(this,t,St,Ot,ge,{accept:0,disabled:22,getFilesFromEvent:23,maxSize:24,minSize:25,multiple:1,preventDropOnDocument:26,noClick:27,noKeyboard:28,noDrag:29,noDragEventsBubbling:30,containerClasses:2,containerStyles:3,disableDefaultStyles:4,name:5},null,[-1,-1])}}function fe(e,t,n){const i=e.slice();return i[5]=t[n],i[7]=n,i}function It(e){let t,n;return{c(){t=T("p"),n=w("上传文件限制为图片或者视频，不允许超过5M")},l(i){t=O(i,"P",{});var l=k(t);n=F(l,"上传文件限制为图片或者视频，不允许超过5M"),l.forEach(p)},m(i,l){y(i,t,l),g(t,n)},p:be,d(i){i&&p(t)}}}function ue(e){let t,n,i,l,r=e[0],o=[];for(let f=0;f<r.length;f+=1)o[f]=ce(fe(e,r,f));return{c(){t=T("h2"),n=w("Files"),i=L();for(let f=0;f<o.length;f+=1)o[f].c();l=N()},l(f){t=O(f,"H2",{});var c=k(t);n=F(c,"Files"),c.forEach(p),i=j(f);for(let s=0;s<o.length;s+=1)o[s].l(f);l=N()},m(f,c){y(f,t,c),g(t,n),y(f,i,c);for(let s=0;s<o.length;s+=1)o[s].m(f,c);y(f,l,c)},p(f,c){if(c&11){r=f[0];let s;for(s=0;s<r.length;s+=1){const d=fe(f,r,s);o[s]?o[s].p(d,c):(o[s]=ce(d),o[s].c(),o[s].m(l.parentNode,l))}for(;s<o.length;s+=1)o[s].d(1);o.length=r.length}},d(f){f&&p(t),f&&p(i),et(o,f),f&&p(l)}}}function zt(e){let t,n=e[9]+"",i,l;return{c(){t=T("pre"),i=w(n),l=L()},l(r){t=O(r,"PRE",{});var o=k(t);i=F(o,n),o.forEach(p),l=j(r)},m(r,o){y(r,t,o),g(t,i),y(r,l,o)},p(r,o){o&1&&n!==(n=r[9]+"")&&U(i,n)},d(r){r&&p(t),r&&p(l)}}}function Lt(e){let t,n,i,l=(e[8]??"")+"",r,o,f,c=e[1][e[7]]+"",s,d,u,m;function S(){return e[4](e[8],e[7])}return{c(){t=T("p"),n=w(`Uploaded:
        `),i=T("code"),r=w(l),o=L(),f=T("button"),s=w(c),d=L()},l(v){t=O(v,"P",{});var h=k(t);n=F(h,`Uploaded:
        `),i=O(h,"CODE",{});var B=k(i);r=F(B,l),B.forEach(p),o=j(h),f=O(h,"BUTTON",{});var K=k(f);s=F(K,c),K.forEach(p),h.forEach(p),d=j(v)},m(v,h){y(v,t,h),g(t,n),g(t,i),g(i,r),g(t,o),g(t,f),g(f,s),y(v,d,h),u||(m=D(f,"click",S),u=!0)},p(v,h){e=v,h&1&&l!==(l=(e[8]??"")+"")&&U(r,l),h&2&&c!==(c=e[1][e[7]]+"")&&U(s,c)},d(v){v&&p(t),v&&p(d),u=!1,m()}}}function jt(e){let t,n=e[5].name+"",i,l,r=e[5].size+"",o,f,c,s,d;return{c(){t=T("p"),i=w(n),l=w(" ("),o=w(r),f=w(` bytes):Uploading
        `),c=ne("svg"),s=ne("path"),d=L(),this.h()},l(u){t=O(u,"P",{});var m=k(t);i=F(m,n),l=F(m," ("),o=F(m,r),f=F(m,` bytes):Uploading
        `),c=re(m,"svg",{viewBox:!0,xmlns:!0,style:!0});var S=k(c);s=re(S,"path",{d:!0,fill:!0,"data-v-793b8fc8":!0}),k(s).forEach(p),S.forEach(p),m.forEach(p),d=j(u),this.h()},h(){b(s,"d","M554.666667 268.8v601.6h-85.333334V268.8L337.066667 401.066667 277.333333 341.333333 512 106.666667 746.666667 341.333333l-59.733334 59.733334L554.666667 268.8z"),b(s,"fill","#0075ff"),b(s,"data-v-793b8fc8",""),b(c,"viewBox","0 0 1024 1024"),b(c,"xmlns","http://www.w3.org/2000/svg"),V(c,"width","1em"),V(c,"height","1em"),V(c,"vertical-align","-0.16em")},m(u,m){y(u,t,m),g(t,i),g(t,l),g(t,o),g(t,f),g(t,c),g(c,s),y(u,d,m)},p(u,m){m&1&&n!==(n=u[5].name+"")&&U(i,n),m&1&&r!==(r=u[5].size+"")&&U(o,r)},d(u){u&&p(t),u&&p(d)}}}function ce(e){let t,n,i={ctx:e,current:null,token:null,hasCatch:!0,pending:jt,then:Lt,catch:zt,value:8,error:9};return te(n=de(e[5]),i),{c(){t=N(),i.block.c()},l(l){t=N(),i.block.l(l)},m(l,r){y(l,t,r),i.block.m(l,i.anchor=r),i.mount=()=>t.parentNode,i.anchor=t},p(l,r){e=l,i.ctx=e,r&1&&n!==(n=de(e[5]))&&te(n,i)||tt(i,e,r)},d(l){l&&p(t),i.block.d(l),i.token=null,i=null}}}function Mt(e){let t,n,i,l;t=new Pt({props:{$$slots:{default:[It]},$$scope:{ctx:e}}}),t.$on("drop",e[2]);let r=e[0]&&ue(e);return{c(){Xe(t.$$.fragment),n=L(),r&&r.c(),i=N()},l(o){Ze(t.$$.fragment,o),n=j(o),r&&r.l(o),i=N()},m(o,f){xe(t,o,f),y(o,n,f),r&&r.m(o,f),y(o,i,f),l=!0},p(o,[f]){const c={};f&1024&&(c.$$scope={dirty:f,ctx:o}),t.$set(c),o[0]?r?r.p(o,f):(r=ue(o),r.c(),r.m(i.parentNode,i)):r&&(r.d(1),r=null)},i(o){l||(he(t.$$.fragment,o),l=!0)},o(o){_e(t.$$.fragment,o),l=!1},d(o){$e(t,o),o&&p(n),r&&r.d(o),o&&p(i)}}}async function de(e){var l,r;const t=new FormData;t.append("file",e);let n=await fetch("https://reliedema.icu/api/upload",{method:"POST",body:t}).then(o=>o.json());return(l=n==null?void 0:n.at(0))!=null&&l.src?"https://rldmtest.pages.dev"+((r=n==null?void 0:n.at(0))==null?void 0:r.src):"上传失败"}function Rt(e,t,n){let i,l;function r(c){const s=["jpg","png","bmp","jpeg","gif","webp","mp4"];n(0,i=c.detail.acceptedFiles.filter(d=>s.includes(d.name.substring(d.name.lastIndexOf(".")+1).toLowerCase())&&d.size/1024/1024<=5)),n(1,l=Array(i.length).fill("📋"))}function o(c,s){const d=document.createElement("input");d.value=c,document.body.appendChild(d),d.select(),document.execCommand("Copy"),d.remove(),n(1,l[s]="✅",l)}return[i,l,r,o,(c,s)=>{o(c,s)}]}class Bt extends me{constructor(t){super(),pe(this,t,Rt,Mt,ge,{})}}export{Bt as default};
