import{S as me,i as ge,s as pe,D as Ue,k as O,a as j,l as A,m as C,c as z,h as g,n as b,p as V,b as D,H as h,J as v,E as He,F as We,G as qe,f as he,t as _e,K as Ye,L as Ve,M as Je,v as ee,q as F,r as k,C as Qe,x as Xe,e as N,y as Ze,z as xe,A as $e,N as et,O as te,P as tt,u as U,Q as ne,R as re}from"../../chunks/index-667a5ca6.js";function H(e,t,n,i){function l(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function f(c){try{s(i.next(c))}catch(u){o(u)}}function d(c){try{s(i.throw(c))}catch(u){o(u)}}function s(c){c.done?r(c.value):l(c.value).then(f,d)}s((i=i.apply(e,t||[])).next())})}function W(e,t){var n={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,l,r,o;return o={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function f(s){return function(c){return d([s,c])}}function d(s){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(n=0)),n;)try{if(i=1,l&&(r=s[0]&2?l.return:s[0]?l.throw||((r=l.return)&&r.call(l),0):l.next)&&!(r=r.call(l,s[1])).done)return r;switch(l=0,r&&(s=[s[0]&2,r.value]),s[0]){case 0:case 1:r=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,l=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if(r=n.trys,!(r=r.length>0&&r[r.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!r||s[1]>r[0]&&s[1]<r[3])){n.label=s[1];break}if(s[0]===6&&n.label<r[1]){n.label=r[1],r=s;break}if(r&&n.label<r[2]){n.label=r[2],n.ops.push(s);break}r[2]&&n.ops.pop(),n.trys.pop();continue}s=t.call(e,n)}catch(c){s=[6,c],l=0}finally{i=r=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function nt(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var i=n.call(e),l,r=[],o;try{for(;(t===void 0||t-- >0)&&!(l=i.next()).done;)r.push(l.value)}catch(f){o={error:f}}finally{try{l&&!l.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return r}function rt(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(nt(arguments[t]));return e}var it=new Map([["avi","video/avi"],["gif","image/gif"],["ico","image/x-icon"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["mkv","video/x-matroska"],["mov","video/quicktime"],["mp4","video/mp4"],["pdf","application/pdf"],["png","image/png"],["zip","application/zip"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]]);function J(e,t){var n=lt(e);if(typeof n.path!="string"){var i=e.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof t=="string"?t:typeof i=="string"&&i.length>0?i:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}function lt(e){var t=e.name,n=t&&t.lastIndexOf(".")!==-1;if(n&&!e.type){var i=t.split(".").pop().toLowerCase(),l=it.get(i);l&&Object.defineProperty(e,"type",{value:l,writable:!1,configurable:!1,enumerable:!0})}return e}var at=[".DS_Store","Thumbs.db"];function ot(e){return H(this,void 0,void 0,function(){return W(this,function(t){return[2,st(e)&&e.dataTransfer?ct(e.dataTransfer,e.type):ft(e)]})})}function st(e){return!!e.dataTransfer}function ft(e){var t=ut(e.target)?e.target.files?Z(e.target.files):[]:[];return t.map(function(n){return J(n)})}function ut(e){return e!==null}function ct(e,t){return H(this,void 0,void 0,function(){var n,i;return W(this,function(l){switch(l.label){case 0:return e.items?(n=Z(e.items).filter(function(r){return r.kind==="file"}),t!=="drop"?[2,n]:[4,Promise.all(n.map(dt))]):[3,2];case 1:return i=l.sent(),[2,ie(be(i))];case 2:return[2,ie(Z(e.files).map(function(r){return J(r)}))]}})})}function ie(e){return e.filter(function(t){return at.indexOf(t.name)===-1})}function Z(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];t.push(i)}return t}function dt(e){if(typeof e.webkitGetAsEntry!="function")return le(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?ye(t):le(e)}function be(e){return e.reduce(function(t,n){return rt(t,Array.isArray(n)?be(n):[n])},[])}function le(e){var t=e.getAsFile();if(!t)return Promise.reject(e+" is not a File");var n=J(t);return Promise.resolve(n)}function mt(e){return H(this,void 0,void 0,function(){return W(this,function(t){return[2,e.isDirectory?ye(e):gt(e)]})})}function ye(e){var t=e.createReader();return new Promise(function(n,i){var l=[];function r(){var o=this;t.readEntries(function(f){return H(o,void 0,void 0,function(){var d,s,c;return W(this,function(u){switch(u.label){case 0:if(f.length)return[3,5];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,Promise.all(l)];case 2:return d=u.sent(),n(d),[3,4];case 3:return s=u.sent(),i(s),[3,4];case 4:return[3,6];case 5:c=Promise.all(f.map(mt)),l.push(c),r(),u.label=6;case 6:return[2]}})})},function(f){i(f)})}r()})}function gt(e){return H(this,void 0,void 0,function(){return W(this,function(t){return[2,new Promise(function(n,i){e.file(function(l){var r=J(l,e.fullPath);n(r)},function(l){i(l)})})]})})}function pt(e,t){if(e&&t){const n=Array.isArray(t)?t:t.split(","),i=e.name||"",l=(e.type||"").toLowerCase(),r=l.replace(/\/.*$/,"");return n.some(o=>{const f=o.trim().toLowerCase();return f.charAt(0)==="."?i.toLowerCase().endsWith(f):f.endsWith("/*")?r===f.replace(/\/.*$/,""):l===f})}return!0}const ht="file-invalid-type",_t="file-too-large",bt="file-too-small",yt="too-many-files",vt=e=>{e=Array.isArray(e)&&e.length===1?e[0]:e;const t=Array.isArray(e)?`one of ${e.join(", ")}`:e;return{code:ht,message:`File type must be ${t}`}},ae=e=>({code:_t,message:`File is larger than ${e} bytes`}),oe=e=>({code:bt,message:`File is smaller than ${e} bytes`}),Dt={code:yt,message:"Too many files"};function Et(e,t){const n=e.type==="application/x-moz-file"||pt(e,t);return[n,n?null:vt(t)]}function wt(e,t,n){if(G(e.size))if(G(t)&&G(n)){if(e.size>n)return[!1,ae(n)];if(e.size<t)return[!1,oe(t)]}else{if(G(t)&&e.size<t)return[!1,oe(t)];if(G(n)&&e.size>n)return[!1,ae(n)]}return[!0,null]}function G(e){return e!=null}function se(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function Y(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,t=>t==="Files"||t==="application/x-moz-file"):!!e.target&&!!e.target.files}function Ft(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function kt(e){return e.indexOf("Edge/")!==-1}function Ct(e=window.navigator.userAgent){return Ft(e)||kt(e)}function Tt(e){let t,n;return{c(){t=O("p"),n=F("Drag 'n' drop some files here, or click to select files")},l(i){t=A(i,"P",{});var l=C(t);n=k(l,"Drag 'n' drop some files here, or click to select files"),l.forEach(g)},m(i,l){D(i,t,l),h(t,n)},p:Qe,d(i){i&&g(t)}}}function Ot(e){let t,n,i,l,r,o,f;const d=e[32].default,s=Ue(d,e,e[31],null),c=s||Tt();return{c(){t=O("div"),n=O("input"),i=j(),c&&c.c(),this.h()},l(u){t=A(u,"DIV",{class:!0,style:!0});var m=C(t);n=A(m,"INPUT",{accept:!0,type:!0,name:!0,autocomplete:!0,tabindex:!0,style:!0}),i=z(m),c&&c.l(m),m.forEach(g),this.h()},h(){b(n,"accept",e[0]),n.multiple=e[1],b(n,"type","file"),b(n,"name",e[5]),b(n,"autocomplete","off"),b(n,"tabindex","-1"),V(n,"display","none"),b(t,"class",l=(e[4]?"":"dropzone")+" "+e[2]+" svelte-817dg2"),b(t,"style",e[3])},m(u,m){D(u,t,m),h(t,n),e[33](n),h(t,i),c&&c.m(t,null),e[34](t),r=!0,o||(f=[v(window,"focus",e[21]),v(window,"dragover",e[19]),v(window,"drop",e[20]),v(n,"change",e[15]),v(n,"click",At),v(t,"keydown",e[17](e[8])),v(t,"focus",e[17](e[9])),v(t,"blur",e[17](e[10])),v(t,"click",e[16](e[11])),v(t,"dragenter",e[18](e[12])),v(t,"dragover",e[18](e[13])),v(t,"dragleave",e[18](e[14])),v(t,"drop",e[18](e[15]))],o=!0)},p(u,m){(!r||m[0]&1)&&b(n,"accept",u[0]),(!r||m[0]&2)&&(n.multiple=u[1]),(!r||m[0]&32)&&b(n,"name",u[5]),s&&s.p&&(!r||m[1]&1)&&He(s,d,u,u[31],r?qe(d,u[31],m,null):We(u[31]),null),(!r||m[0]&20&&l!==(l=(u[4]?"":"dropzone")+" "+u[2]+" svelte-817dg2"))&&b(t,"class",l),(!r||m[0]&8)&&b(t,"style",u[3])},i(u){r||(he(c,u),r=!0)},o(u){_e(c,u),r=!1},d(u){u&&g(t),e[33](null),c&&c.d(u),e[34](null),o=!1,Ye(f)}}}function At(e){e.stopPropagation()}function St(e,t,n){let{$$slots:i={},$$scope:l}=t,{accept:r}=t,{disabled:o=!1}=t,{getFilesFromEvent:f=ot}=t,{maxSize:d=1/0}=t,{minSize:s=0}=t,{multiple:c=!0}=t,{preventDropOnDocument:u=!0}=t,{noClick:m=!1}=t,{noKeyboard:S=!1}=t,{noDrag:y=!1}=t,{noDragEventsBubbling:p=!1}=t,{containerClasses:B=""}=t,{containerStyles:K=""}=t,{disableDefaultStyles:x=!1}=t,{name:$=""}=t;const I=Ve();let _={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]},T,w;function ve(){_.isFileDialogActive=!1,_.isDragActive=!1,_.draggedFiles=[],_.acceptedFiles=[],_.fileRejections=[]}function Q(){w&&(n(7,w.value=null,w),_.isFileDialogActive=!0,w.click())}function De(a){!T||!T.isEqualNode(a.target)||(a.keyCode===32||a.keyCode===13)&&(a.preventDefault(),Q())}function Ee(){_.isFocused=!0}function we(){_.isFocused=!1}function Fe(){m||(Ct()?setTimeout(Q,0):Q())}function ke(a){a.preventDefault(),q(a),R=[...R,a.target],Y(a)&&Promise.resolve(f(a)).then(P=>{se(a)&&!p||(_.draggedFiles=P,_.isDragActive=!0,I("dragenter",{dragEvent:a}))})}function Ce(a){if(a.preventDefault(),q(a),a.dataTransfer)try{a.dataTransfer.dropEffect="copy"}catch{}return Y(a)&&I("dragover",{dragEvent:a}),!1}function Te(a){a.preventDefault(),q(a);const P=R.filter(L=>T&&T.contains(L)),E=P.indexOf(a.target);E!==-1&&P.splice(E,1),R=P,!(P.length>0)&&(_.isDragActive=!1,_.draggedFiles=[],Y(a)&&I("dragleave",{dragEvent:a}))}function Oe(a){a.preventDefault(),q(a),R=[],Y(a)&&(I("filedropped",{event:a}),Promise.resolve(f(a)).then(P=>{if(se(a)&&!p)return;const E=[],L=[];P.forEach(M=>{const[Re,Me]=Et(M,r),[Ne,Be]=wt(M,s,d);if(Re&&Ne)E.push(M);else{const Ke=[Me,Be].filter(Ge=>Ge);L.push({file:M,errors:Ke})}}),!c&&E.length>1&&(E.forEach(M=>{L.push({file:M,errors:[Dt]})}),E.splice(0)),_.acceptedFiles=E,_.fileRejections=L,I("drop",{acceptedFiles:E,fileRejections:L,event:a}),L.length>0&&I("droprejected",{fileRejections:L,event:a}),E.length>0&&I("dropaccepted",{acceptedFiles:E,event:a})})),ve()}function X(a){return o?null:a}function Ae(a){return S?null:X(a)}function Se(a){return y?null:X(a)}function q(a){p&&a.stopPropagation()}function Ie(a){u&&a.preventDefault()}let R=[];function Pe(a){u&&(T&&T.contains(a.target)||(a.preventDefault(),R=[]))}function Le(){_.isFileDialogActive&&setTimeout(()=>{if(w){const{files:a}=w;a.length||(_.isFileDialogActive=!1,I("filedialogcancel"))}},300)}Je(()=>{n(7,w=null)});function je(a){ee[a?"unshift":"push"](()=>{w=a,n(7,w)})}function ze(a){ee[a?"unshift":"push"](()=>{T=a,n(6,T)})}return e.$$set=a=>{"accept"in a&&n(0,r=a.accept),"disabled"in a&&n(22,o=a.disabled),"getFilesFromEvent"in a&&n(23,f=a.getFilesFromEvent),"maxSize"in a&&n(24,d=a.maxSize),"minSize"in a&&n(25,s=a.minSize),"multiple"in a&&n(1,c=a.multiple),"preventDropOnDocument"in a&&n(26,u=a.preventDropOnDocument),"noClick"in a&&n(27,m=a.noClick),"noKeyboard"in a&&n(28,S=a.noKeyboard),"noDrag"in a&&n(29,y=a.noDrag),"noDragEventsBubbling"in a&&n(30,p=a.noDragEventsBubbling),"containerClasses"in a&&n(2,B=a.containerClasses),"containerStyles"in a&&n(3,K=a.containerStyles),"disableDefaultStyles"in a&&n(4,x=a.disableDefaultStyles),"name"in a&&n(5,$=a.name),"$$scope"in a&&n(31,l=a.$$scope)},[r,c,B,K,x,$,T,w,De,Ee,we,Fe,ke,Ce,Te,Oe,X,Ae,Se,Ie,Pe,Le,o,f,d,s,u,m,S,y,p,l,i,je,ze]}class It extends me{constructor(t){super(),ge(this,t,St,Ot,pe,{accept:0,disabled:22,getFilesFromEvent:23,maxSize:24,minSize:25,multiple:1,preventDropOnDocument:26,noClick:27,noKeyboard:28,noDrag:29,noDragEventsBubbling:30,containerClasses:2,containerStyles:3,disableDefaultStyles:4,name:5},null,[-1,-1])}}function fe(e,t,n){const i=e.slice();return i[5]=t[n],i[7]=n,i}function ue(e){let t,n,i,l,r=e[0],o=[];for(let f=0;f<r.length;f+=1)o[f]=ce(fe(e,r,f));return{c(){t=O("h2"),n=F("Files"),i=j();for(let f=0;f<o.length;f+=1)o[f].c();l=N()},l(f){t=A(f,"H2",{});var d=C(t);n=k(d,"Files"),d.forEach(g),i=z(f);for(let s=0;s<o.length;s+=1)o[s].l(f);l=N()},m(f,d){D(f,t,d),h(t,n),D(f,i,d);for(let s=0;s<o.length;s+=1)o[s].m(f,d);D(f,l,d)},p(f,d){if(d&11){r=f[0];let s;for(s=0;s<r.length;s+=1){const c=fe(f,r,s);o[s]?o[s].p(c,d):(o[s]=ce(c),o[s].c(),o[s].m(l.parentNode,l))}for(;s<o.length;s+=1)o[s].d(1);o.length=r.length}},d(f){f&&g(t),f&&g(i),et(o,f),f&&g(l)}}}function Pt(e){let t,n=e[9]+"",i,l;return{c(){t=O("pre"),i=F(n),l=j()},l(r){t=A(r,"PRE",{});var o=C(t);i=k(o,n),o.forEach(g),l=z(r)},m(r,o){D(r,t,o),h(t,i),D(r,l,o)},p(r,o){o&1&&n!==(n=r[9]+"")&&U(i,n)},d(r){r&&g(t),r&&g(l)}}}function Lt(e){let t,n,i,l=(e[8]??"")+"",r,o,f,d=e[1][e[7]]+"",s,c,u,m;function S(){return e[4](e[8],e[7])}return{c(){t=O("p"),n=F(`Uploaded:
        `),i=O("code"),r=F(l),o=j(),f=O("button"),s=F(d),c=j()},l(y){t=A(y,"P",{});var p=C(t);n=k(p,`Uploaded:
        `),i=A(p,"CODE",{});var B=C(i);r=k(B,l),B.forEach(g),o=z(p),f=A(p,"BUTTON",{});var K=C(f);s=k(K,d),K.forEach(g),p.forEach(g),c=z(y)},m(y,p){D(y,t,p),h(t,n),h(t,i),h(i,r),h(t,o),h(t,f),h(f,s),D(y,c,p),u||(m=v(f,"click",S),u=!0)},p(y,p){e=y,p&1&&l!==(l=(e[8]??"")+"")&&U(r,l),p&2&&d!==(d=e[1][e[7]]+"")&&U(s,d)},d(y){y&&g(t),y&&g(c),u=!1,m()}}}function jt(e){let t,n=e[5].name+"",i,l,r=e[5].size+"",o,f,d,s,c;return{c(){t=O("p"),i=F(n),l=F(" ("),o=F(r),f=F(` bytes):Uploading
        `),d=ne("svg"),s=ne("path"),c=j(),this.h()},l(u){t=A(u,"P",{});var m=C(t);i=k(m,n),l=k(m," ("),o=k(m,r),f=k(m,` bytes):Uploading
        `),d=re(m,"svg",{viewBox:!0,xmlns:!0,style:!0});var S=C(d);s=re(S,"path",{d:!0,fill:!0,"data-v-793b8fc8":!0}),C(s).forEach(g),S.forEach(g),m.forEach(g),c=z(u),this.h()},h(){b(s,"d","M554.666667 268.8v601.6h-85.333334V268.8L337.066667 401.066667 277.333333 341.333333 512 106.666667 746.666667 341.333333l-59.733334 59.733334L554.666667 268.8z"),b(s,"fill","#0075ff"),b(s,"data-v-793b8fc8",""),b(d,"viewBox","0 0 1024 1024"),b(d,"xmlns","http://www.w3.org/2000/svg"),V(d,"width","1em"),V(d,"height","1em"),V(d,"vertical-align","-0.16em")},m(u,m){D(u,t,m),h(t,i),h(t,l),h(t,o),h(t,f),h(t,d),h(d,s),D(u,c,m)},p(u,m){m&1&&n!==(n=u[5].name+"")&&U(i,n),m&1&&r!==(r=u[5].size+"")&&U(o,r)},d(u){u&&g(t),u&&g(c)}}}function ce(e){let t,n,i={ctx:e,current:null,token:null,hasCatch:!0,pending:jt,then:Lt,catch:Pt,value:8,error:9};return te(n=de(e[5]),i),{c(){t=N(),i.block.c()},l(l){t=N(),i.block.l(l)},m(l,r){D(l,t,r),i.block.m(l,i.anchor=r),i.mount=()=>t.parentNode,i.anchor=t},p(l,r){e=l,i.ctx=e,r&1&&n!==(n=de(e[5]))&&te(n,i)||tt(i,e,r)},d(l){l&&g(t),i.block.d(l),i.token=null,i=null}}}function zt(e){let t,n,i,l;t=new It({}),t.$on("drop",e[2]);let r=e[0]&&ue(e);return{c(){Xe(t.$$.fragment),n=j(),r&&r.c(),i=N()},l(o){Ze(t.$$.fragment,o),n=z(o),r&&r.l(o),i=N()},m(o,f){xe(t,o,f),D(o,n,f),r&&r.m(o,f),D(o,i,f),l=!0},p(o,[f]){o[0]?r?r.p(o,f):(r=ue(o),r.c(),r.m(i.parentNode,i)):r&&(r.d(1),r=null)},i(o){l||(he(t.$$.fragment,o),l=!0)},o(o){_e(t.$$.fragment,o),l=!1},d(o){$e(t,o),o&&g(n),r&&r.d(o),o&&g(i)}}}async function de(e){var l,r;const t=new FormData;t.append("file",e);let n=await fetch("/upload",{method:"POST",body:t}).then(o=>o.json());return(l=n==null?void 0:n.at(0))!=null&&l.src?"https://rldmtest.pages.dev"+((r=n==null?void 0:n.at(0))==null?void 0:r.src):"上传失败"}function Rt(e,t,n){let i,l;function r(d){const s=["jpg","png","bmp","jpeg","gif","webp"];n(0,i=d.detail.acceptedFiles.filter(c=>s.includes(c.name.substring(c.name.lastIndexOf(".")+1).toLowerCase()))),n(1,l=Array(i.length).fill("📋"))}function o(d,s){const c=document.createElement("input");c.value=d,document.body.appendChild(c),c.select(),document.execCommand("Copy"),c.remove(),n(1,l[s]="✅",l)}return[i,l,r,o,(d,s)=>{o(d,s)}]}class Nt extends me{constructor(t){super(),ge(this,t,Rt,zt,pe,{})}}export{Nt as default};
